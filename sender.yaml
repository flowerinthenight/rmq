apiVersion: apps/v1beta2 # for versions before 1.8.0 use apps/v1beta1
kind: Deployment
metadata:
  name: rmq-sender
spec:
  selector:
    matchLabels:
      app: sender
  replicas: 1
  template:
    metadata:
      labels:
        app: sender
    spec:
      containers:
      - name: sender
        image: 963826138034.dkr.ecr.ap-northeast-1.amazonaws.com/sender:003
        resources:
          requests:
            cpu: 100m
            memory: 100Mi
        imagePullPolicy: Always
        env:
        - name: GET_HOSTS_FROM
          value: dns
        - name: RABBITMQ_HOST
          value: rmqdev-rabbitmq-ha.default.svc.cluster.local
        - name: RABBITMQ_PORT
          value: "5672"
        - name: RABBITMQ_USER
          value: admin
        - name: RABBITMQ_PASS
          value: q8qdyaRf9SQu38aDTjTB
